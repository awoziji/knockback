/*
  knockback.js 1.2.2
  Copyright (c)  2011-2017 Kevin Malakoff.
  License: MIT (http://www.opensource.org/licenses/mit-license.php)
  Source: https://github.com/kmalakoff/knockback
  Dependencies: Knockout.js, Backbone.js, and Underscore.js (or LoDash.js).
  Optional dependencies: Backbone.ModelRef.js and BackboneORM.
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("backbone"),require("underscore"),require("knockout")):"function"==typeof define&&define.amd?define(["backbone","underscore","knockout"],t):"object"==typeof exports?exports.kb=t(require("backbone"),require("underscore"),require("knockout")):e.kb=t(e.Backbone,e._,e.ko)}(this,function(e,t,r){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=31)}([function(e,t,r){"use strict";(function(t){function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o,a,l=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=null!=u?u:t,c=r(30),f=["release","destroy","dispose"],v=function(){function e(){i(this,e)}return s(e,null,[{key:"initClass",value:function(){this.VERSION="1.2.2",this.TYPE_UNKNOWN=0,this.TYPE_SIMPLE=1,this.TYPE_ARRAY=2,this.TYPE_MODEL=3,this.TYPE_COLLECTION=4,this.ignore=(null!=c.dependencyDetection?c.dependencyDetection.ignore:void 0)||function(e,t,r){var n=null;return c.computed(function(){return n=e.apply(t,r||[])}).dispose(),n}}},{key:"wasReleased",value:function(e){return!e||e.__kb_released}},{key:"isReleaseable",value:function(t,r){if(null==r&&(r=0),!t||t!==Object(t)||t.__kb_released)return!1;if(c.isObservable(t)||t instanceof e.ViewModel)return!0;if("function"==typeof t||e.isModel(t)||e.isCollection(t))return!1;var n=!0,i=!1,o=void 0;try{for(var a,l=f[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){if("function"==typeof t[a.value])return!0}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}if(r>0)return!1;for(var s in t){var u=t[s];if("__kb"!==s&&e.isReleaseable(u,r+1))return!0}return!1}},{key:"release",value:function(t){var r=void 0,n=void 0,i=void 0;if(e.isReleaseable(t)){if(t.__kb_released=!0,!o.isArray(t)){if(c.isObservable(t)&&o.isArray(r=e.peek(t))){if(t.__kb_is_co||t.__kb_is_o&&t.valueType()===e.TYPE_COLLECTION)return"function"==typeof t.destroy?t.destroy():void 0;for(n in r)i=r[n],e.isReleaseable(i)&&(r[n]=null,e.release(i));return void("function"==typeof t.dispose&&t.dispose())}var a=!0,l=!1,s=void 0;try{for(var u,v=f[Symbol.iterator]();!(a=(u=v.next()).done);a=!0){var d=u.value;if("function"==typeof t[d])return t[d].call(t)}}catch(e){l=!0,s=e}finally{try{!a&&v.return&&v.return()}finally{if(l)throw s}}return c.isObservable(t)?void 0:this.releaseKeys(t)}for(n in t)i=t[n],e.isReleaseable(i)&&(t[n]=null,e.release(i))}}},{key:"releaseKeys",value:function(t){for(var r in t){var n=t[r];"__kb"!==r&&e.isReleaseable(n)&&(t[r]=null,e.release(n))}}},{key:"releaseOnNodeRemove",value:function(t,r){return t||e._throwUnexpected(this,"missing view model"),r||e._throwUnexpected(this,"missing node"),c.utils.domNodeDisposal.addDisposeCallback(r,function(){return e.release(t)})}},{key:"renderTemplate",value:function(t,r,n){var i=void 0;if(null==n&&(n={}),!(i=null!=u?u.document:void 0))return"undefined"!=typeof console&&null!==console?console.log("renderTemplate: document is undefined"):void 0;var o=i.createElement("div"),a=c.renderTemplate(t,r,n,o,"replaceChildren");if(1===o.childNodes.length)o=o.childNodes[0];else if(o.childNodes.length)for(var l=0,s=o.childNodes.length,f=s>=0;f?l<=s:l>=s;f?l++:l--)try{c.storedBindingContextForNode(o,c.contextFor(o.childNodes[l]));break}catch(e){}return e.releaseOnNodeRemove(r,o),a.dispose(),r.afterRender&&!n.afterRender&&r.afterRender(o),o}},{key:"applyBindings",value:function(t,r){if(r.length){var n=void 0,i=Array.from([document.createElement("div"),r]),o=l(i,2);r=o[0],n=o[1];var a=!0,s=!1,u=void 0;try{for(var f,v=n[Symbol.iterator]();!(a=(f=v.next()).done);a=!0){var d=f.value;r.appendChild(d)}}catch(e){s=!0,u=e}finally{try{!a&&v.return&&v.return()}finally{if(s)throw u}}}return c.applyBindings(t,r),e.releaseOnNodeRemove(t,r),r}},{key:"getValue",value:function(t,r,i){if(t)return o.isFunction(t[r])&&(null!=e.settings.orm?e.settings.orm.useFunction(t,r):void 0)?t[r]():i?t.get.apply(t,n(o.map([r].concat(i),function(t){return e.peek(t)}))):t.get(r)}},{key:"setValue",value:function(t,r,n){var i=void 0;if(t)return o.isFunction(t[r])&&(null!=e.settings.orm?e.settings.orm.useFunction(t,r):void 0)?t[r](n):((i={})[r]=n,t.set(i))}},{key:"_throwMissing",value:function(e,t){throw(o.isString(e)?e:e.constructor.name)+": "+t+" is missing"}},{key:"_throwUnexpected",value:function(e,t){throw(o.isString(e)?e:e.constructor.name)+": "+t+" is unexpected"}},{key:"publishMethods",value:function(t,r,n){var i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value;return void(t[u]=e._.bind(r[u],r))}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}},{key:"peek",value:function(e){if(!c.isObservable(e))return e}},{key:"isModel",value:function(t){return t&&(t instanceof e.Model||"function"==typeof t.get&&"function"==typeof t.bind)}},{key:"isCollection",value:function(t){return t&&t instanceof e.Collection}}]),e}();v.initClass(),e.exports=v,u.Parse?(a=v.Parse=u.Parse,o=v._=u.Parse._):(a=v.Backbone=r(28),o=v._=r(29)),v.ko=c,v.Collection=a.Collection,v.Model=a.Object||a.Model,v.Events=a.Events}).call(t,r(4))},function(e,t,r){"use strict"},function(e,t,r){"use strict";var n=void 0,i=void 0,o=n=r(0),a=o._,l=(o.ko,{default:null,"backbone-orm":null,"backbone-associations":r(24),"backbone-relational":r(25)});n.settings={orm:l.default};for(var s in l)if((i=l[s])&&i.isAvailable()){n.settings.orm=i;break}e.exports=function(e){null==e&&(e={});for(s in e){var t;switch(i=e[s],s){case"orm":if(a.isString(i)){if(!l.hasOwnProperty(i)){console.log("Knockback configure: could not find orm: "+i+". Available: "+a.keys(l).join(", "));continue}if((t=l[i])&&!t.isAvailable()){console.log("Knockback configure: could not enable orm "+i+". Make sure it is included before Knockback");continue}n.settings.orm=t;continue}n.settings.orm=i;break;default:n.settings[s]=i}}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=void 0,l=a=r(0),s=l._,u=l.ko;e.exports=function(){function e(t){n(this,e),this.create_options=t,this._vo=u.observable(null)}return o(e,[{key:"destroy",value:function(){var e=void 0;return this.__kb_released=!0,(e=this.__kb_value)&&(this.__kb_value=null,this.create_options.store&&a.utils.wrappedCreator(e)?this.create_options.store.release(e):a.release(e)),this.create_options=null}},{key:"value",value:function(){return u.utils.unwrapObservable(this._vo())}},{key:"rawValue",value:function(){return this.__kb_value}},{key:"valueType",value:function(e,t){var r=a.getValue(e,t);return this.value_type||this._updateValueObservable(r),this.value_type}},{key:"update",value:function(e){if(!this.__kb_released){void 0!==e||(e=null);var t=a.utils.valueType(e);(null!=this.__kb_value?this.__kb_value.__kb_released:void 0)&&(this.__kb_value=this.value_type=void 0);var r=this.__kb_value;switch(this.value_type){case a.TYPE_COLLECTION:if(this.value_type===a.TYPE_COLLECTION&&t===a.TYPE_ARRAY)return r(e);if(t===a.TYPE_COLLECTION||s.isNull(e))return void(e&&e instanceof a.CollectionObservable?this._updateValueObservable(a.utils.wrappedObject(e),e):a.peek(r.collection)!==e&&r.collection(e));break;case a.TYPE_MODEL:if(t===a.TYPE_MODEL||s.isNull(e))return void(e&&!a.isModel(e)?this._updateValueObservable(a.utils.wrappedObject(e),e):a.utils.wrappedObject(r)!==a.utils.resolveModel(e)&&this._updateValueObservable(e))}if(this.value_type!==t||s.isUndefined(this.value_type)){if(a.peek(r)!==e)return this._updateValueObservable(e)}else if(a.peek(r)!==e)return r(e)}}},{key:"_updateValueObservable",value:function(e,t){var r=void 0,n=void 0,o=this.create_options,l=a.utils.inferCreator(e,o.factory,o.path);null!==e||l||(this.value_type===a.TYPE_MODEL?l=a.ViewModel:this.value_type===a.TYPE_COLLECTION&&(l=a.CollectionObservable)),o.creator=l;var c=a.TYPE_UNKNOWN,f=Array.from([this.__kb_value,void 0]),v=i(f,2);return r=v[0],this.__kb_value=v[1],t?(n=t,o.store&&o.store.retain(t,e,l)):l?o.store?n=o.store.retainOrCreate(e,o,!0):l.models_only?(n=e,c=a.TYPE_SIMPLE):n=l.create?l.create(e,o):new l(e,o):s.isArray(e)?(c=a.TYPE_ARRAY,n=u.observableArray(e)):(c=a.TYPE_SIMPLE,n=u.observable(e)),(this.value_type=c)===a.TYPE_UNKNOWN&&(u.isObservable(n)?n.__kb_is_co?(this.value_type=a.TYPE_COLLECTION,a.utils.wrappedObject(n,e)):this.value_type||(this.value_type=a.TYPE_SIMPLE):(this.value_type=a.TYPE_MODEL,a.utils.wrappedObject(n,a.utils.resolveModel(e)))),r&&(this.create_options.store?this.create_options.store.release(r):a.release(r)),this.__kb_value=n,this._vo(n)}},{key:"_inferType",value:function(e){}}]),e}()},function(e,t,r){"use strict";var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}e.exports=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return void 0!==e&&null!==e?t(e):void 0}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=void 0,l=a=r(0),s=l._,u=l.ko,c=r(1),f=["destroy","shareOptions","filters","comparator","sortAttribute","viewModelByModel","hasViewModels"];a.compare=function(e,t){return s.isString(e)?e.localeCompare(""+t):s.isString(t)?t.localeCompare(""+e):e===t?0:e<t?-1:1};var v=function(){function e(t,r,i){var o=this;n(this,e),this._onCollectionChange=this._onCollectionChange.bind(this);var l=Array.prototype.slice.call(s.isArguments(t)?t:arguments);return a.ignore(function(){t=l[0]instanceof a.Collection?l.shift():s.isArray(l[0])?new a.Collection(l.shift()):new a.Collection,s.isFunction(l[0])&&(l[0]={view_model:l[0]}),i={};var e=!0,r=!1,n=void 0;try{for(var c,v=l[Symbol.iterator]();!(e=(c=v.next()).done);e=!0){var d=c.value;s.extend(i,d)}}catch(e){r=!0,n=e}finally{try{!e&&v.return&&v.return()}finally{if(r)throw n}}var b=a.utils.wrappedObservable(o,u.observableArray([]));b.__kb_is_co=!0,o.in_edit=0,o.__kb||(o.__kb={}),i=a.utils.collapseOptions(i),i.auto_compact&&(o.auto_compact=!0),i.sort_attribute?o._comparator=u.observable(o._attributeComparator(i.sort_attribute)):o._comparator=u.observable(i.comparator),i.filters?o._filters=u.observableArray(function(){return s.isArray(i.filters)?i.filters:i.filters?[i.filters]:void 0}()):o._filters=u.observableArray([]);var _=o.create_options={store:a.Store.useOptionsOrCreate(i,t,b)};return a.utils.wrappedObject(b,t),o.path=i.path,_.factory=a.utils.wrappedFactory(b,o._shareOrCreateFactory(i)),_.path=a.utils.pathJoin(i.path,"models"),_.creator=_.factory.creatorForPath(null,_.path),_.creator&&(o.models_only=_.creator.models_only),a.publishMethods(b,o,f),o._collection=u.observable(t),b.collection=o.collection=u.computed({read:function(){return o._collection()},write:function(e){return a.ignore(function(){var t=void 0;if((t=o._collection())!==e)return a.utils.wrappedObject(b,e),t&&t.unbind("all",o._onCollectionChange),e&&e.bind("all",o._onCollectionChange),o._collection(e)})}}),t&&t.bind("all",o._onCollectionChange),o._mapper=u.computed(function(){var e=void 0,t=void 0,r=void 0,n=o._comparator(),i=o._filters();i&&function(){var t=[],r=!0,n=!1,o=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)e=a.value,t.push(u.utils.unwrapObservable(e))}catch(e){n=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}t}();var l=o._collection();if(!o.in_edit){b=a.utils.wrappedObservable(o);a.peek(b);l&&(t=l.models),t&&0!==l.models.length?(t=s.filter(t,function(e){return!i.length||o._selectModel(e)}),r=n?s.map(t,function(e){return o._createViewModel(e)}).sort(n):o.models_only?i.length?t:t.slice():s.map(t,function(e){return o._createViewModel(e)})):r=[],o.in_edit++,b(r),o.in_edit--}}),b.subscribe(s.bind(o._onObservableArrayChange,o)),!a.statistics||a.statistics.register("CollectionObservable",o),b})}return o(e,null,[{key:"initClass",value:function(){this.extend=c}}]),o(e,[{key:"destroy",value:function(){this.__kb_released=!0;var e=a.utils.wrappedObservable(this),t=a.peek(this._collection);if(a.utils.wrappedObject(e,null),t){t.unbind("all",this._onCollectionChange);var r=a.peek(e);r.splice(0,r.length)}return this.collection.dispose(),this._collection=e.collection=this.collection=null,this._mapper.dispose(),this._mapper=null,a.release(this._filters),this._filters=null,this._comparator(null),this._comparator=null,this.create_options=null,e.collection=null,a.utils.wrappedDestroy(this),!a.statistics||a.statistics.unregister("CollectionObservable",this)}},{key:"shareOptions",value:function(){var e=a.utils.wrappedObservable(this);return{store:a.utils.wrappedStore(e),factory:a.utils.wrappedFactory(e)}}},{key:"filters",value:function(e){return e?this._filters(s.isArray(e)?e:[e]):this._filters([])}},{key:"comparator",value:function(e){return this._comparator(e)}},{key:"sortAttribute",value:function(e){return this._comparator(e?this._attributeComparator(e):null)}},{key:"viewModelByModel",value:function(e){if(this.models_only)return null;var t=e.hasOwnProperty(e.idAttribute)?e.idAttribute:"cid";return s.find(a.peek(a.utils.wrappedObservable(this)),function(r){return!!i(null!=r?r.__kb:void 0,function(e){return e.object})&&r.__kb.object[t]===e[t]})}},{key:"hasViewModels",value:function(){return!this.models_only}},{key:"compact",value:function(){var e=this;return a.ignore(function(){var t=a.utils.wrappedObservable(e);if(a.utils.wrappedStoreIsOwned(t))return a.utils.wrappedStore(t).clear(),e._collection.notifySubscribers(e._collection())})}},{key:"_shareOrCreateFactory",value:function(e){var t=void 0,r=a.utils.pathJoin(e.path,"models"),n=e.factories;if(t=e.factory){var i=void 0;if((i=t.creatorForPath(null,r))&&(!n||n.models===i)){if(!n)return t;if(t.hasPathMappings(n,e.path))return t}}return t=new a.Factory(e.factory),n&&t.addPathMappings(n,e.path),t.creatorForPath(null,r)||(e.hasOwnProperty("models_only")?e.models_only?t.addPathMapping(r,{models_only:!0}):t.addPathMapping(r,a.ViewModel):e.view_model?t.addPathMapping(r,e.view_model):e.create?t.addPathMapping(r,{create:e.create}):t.addPathMapping(r,a.ViewModel)),t}},{key:"_onCollectionChange",value:function(e,t){var r=this;return a.ignore(function(){var n=void 0;if(!r.in_edit&&!a.wasReleased(r))switch(e){case"reset":r.auto_compact?r.compact():r._collection.notifySubscribers(r._collection());break;case"sort":case"resort":r._collection.notifySubscribers(r._collection());break;case"new":case"add":if(!r._selectModel(t))return;var i=a.utils.wrappedObservable(r),o=r._collection();if(o.indexOf(t)===-1)return;if(r.viewModelByModel(t))return;r.in_edit++,(n=r._comparator())?(i().push(r._createViewModel(t)),i.sort(n)):i.splice(o.indexOf(t),0,r._createViewModel(t)),r.in_edit--;break;case"remove":case"destroy":r._onModelRemove(t);break;case"change":if(!r._selectModel(t))return r._onModelRemove(t);if(!(r.models_only?t:r.viewModelByModel(t)))return r._onCollectionChange("add",t);if(!(n=r._comparator()))return;r.in_edit++,a.utils.wrappedObservable(r).sort(n),r.in_edit--}})}},{key:"_onModelRemove",value:function(e){var t=this.models_only?e:this.viewModelByModel(e);if(t){var r=a.utils.wrappedObservable(this);return this.in_edit++,r.remove(t),this.in_edit--}}},{key:"_onObservableArrayChange",value:function(e){var t=this;return a.ignore(function(){var r=void 0;if(!t.in_edit){t.models_only&&(!e.length||a.isModel(e[0]))||!t.models_only&&(!e.length||s.isObject(e[0])&&!a.isModel(e[0]))||a._throwUnexpected(t,"incorrect type passed");var n=a.utils.wrappedObservable(t),i=a.peek(t._collection),o=a.peek(t._filters).length;if(i){var l=e;if(t.models_only)r=s.filter(e,function(e){return!o||t._selectModel(e)});else{!o||(l=[]),r=[];var u=!0,c=!1,f=void 0;try{for(var v,d=e[Symbol.iterator]();!(u=(v=d.next()).done);u=!0){var b,_=v.value,h=a.utils.wrappedObject(_);if(o){if(!t._selectModel(h))continue;l.push(_)}(b=t.create_options.store.find(h,t.create_options.creator))&&(b.constructor===_.constructor||a._throwUnexpected(t,"replacing different type of view model")),t.create_options.store.retain(_,h,t.create_options.creator),r.push(h)}}catch(e){c=!0,f=e}finally{try{!u&&d.return&&d.return()}finally{if(c)throw f}}}t.in_edit++,e.length===l.length||n(l),s.isEqual(i.models,r)||i.reset(r),t.in_edit--}}})}},{key:"_attributeComparator",value:function(e){var t=function(t,r){var n=u.utils.unwrapObservable(e);return a.compare(t.get(n),r.get(n))};return this.models_only?t:function(e,r){return t(a.utils.wrappedModel(e),a.utils.wrappedModel(r))}}},{key:"_createViewModel",value:function(e){return this.models_only?e:this.create_options.store.retainOrCreate(e,this.create_options)}},{key:"_selectModel",value:function(e){var t=a.peek(this._filters),r=!0,n=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;if(u=a.peek(u),s.isFunction(u)){if(!u(e))return!1}else if(s.isArray(u)){if(!u.includes(e.id))return!1}else if(e.id!==u)return!1}}catch(e){n=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw i}}return!0}}]),e}();v.initClass(),a.CollectionObservable=v,a.collectionObservable=function(e,t,r){return new a.CollectionObservable(arguments)},a.observableCollection=a.collectionObservable},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._,s=a.ko;o.EventWatcher=function(){function e(t,r,i){n(this,e),this._onModelLoaded=this._onModelLoaded.bind(this),this._onModelUnloaded=this._onModelUnloaded.bind(this),this._unbindCallbacks=this._unbindCallbacks.bind(this),this.__kb||(this.__kb={}),this.__kb.callbacks={},this.ee=null,i&&this.registerCallbacks(r,i),t&&this.emitter(t)}return i(e,null,[{key:"useOptionsOrCreate",value:function(e,t,r,n){return e.event_watcher?(e.event_watcher.emitter()!==t&&e.event_watcher.model_ref!==t&&o._throwUnexpected(this,"emitter not matching"),o.utils.wrappedEventWatcher(r,e.event_watcher).registerCallbacks(r,n)):(o.utils.wrappedEventWatcherIsOwned(r,!0),o.utils.wrappedEventWatcher(r,new o.EventWatcher(t)).registerCallbacks(r,n))}}]),i(e,[{key:"destroy",value:function(){return this.emitter(null),this.__kb.callbacks=null,o.utils.wrappedDestroy(this)}},{key:"emitter",value:function(e){return 0===arguments.length||this.ee===e?this.ee:(this.model_ref&&(this.model_ref.unbind("loaded",this._onModelLoaded),this.model_ref.unbind("unloaded",this._onModelUnloaded),this.model_ref.release(),this.model_ref=null),o.Backbone&&o.Backbone.ModelRef&&e instanceof o.Backbone.ModelRef?(this.model_ref=e,this.model_ref.retain(),this.model_ref.bind("loaded",this._onModelLoaded),this.model_ref.bind("unloaded",this._onModelUnloaded),e=this.model_ref.model()||null):delete this.model_ref,this.ee!==e&&(e?this._onModelLoaded(e):this._onModelUnloaded(this.ee)),e)}},{key:"registerCallbacks",value:function(e,t){var r=this;e||o._throwMissing(this,"obj"),t||o._throwMissing(this,"callback_info");var n=t.event_selector?t.event_selector.split(" "):["change"],i=this.ee,a=!0,u=!1,c=void 0;try{for(var f,v=n[Symbol.iterator]();!(a=(f=v.next()).done);a=!0){var d=f.value;d&&function(n){var a=void 0,u=void 0;if((a=r.__kb.callbacks[n])||(a=r.__kb.callbacks[n]={model:null,list:[],fn:function(e){var t=!0,r=!1,i=void 0;try{for(var l,c=a.list[Symbol.iterator]();!(t=(l=c.next()).done);t=!0)u=l.value,u.update&&(e&&u.key&&e.hasChanged&&!e.hasChanged(s.utils.unwrapObservable(u.key))||(!o.statistics||o.statistics.addModelEvent({name:n,model:e,key:u.key,path:u.path}),u.update()))}catch(e){r=!0,i=e}finally{try{!t&&c.return&&c.return()}finally{if(r)throw i}}return null}}),a.list.push(u=l.defaults({obj:e},t)),i)r._onModelLoaded(i)}(d)}}catch(e){u=!0,c=e}finally{try{!a&&v.return&&v.return()}finally{if(u)throw c}}return this}},{key:"releaseCallbacks",value:function(e){var t=void 0;this.ee=null;for(var r in this.__kb.callbacks)t=this.__kb.callbacks[r],this._unbindCallbacks(r,t,o.wasReleased(e));return delete this.__kb.callbacks}},{key:"_onModelLoaded",value:function(e){this.ee=e;for(var t in this.__kb.callbacks){var r=this.__kb.callbacks[t];r.model&&r.model!==e&&this._unbindCallbacks(t,r,!0),r.model||(r.model=e,e.bind(t,r.fn));var n=!0,i=!1,a=void 0;try{for(var l,s=r.list[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;u.unbind_fn||(u.unbind_fn=null!=o.settings.orm?o.settings.orm.bind(e,u.key,u.update,u.path):void 0),u.emitter&&u.emitter(e)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}}},{key:"_onModelUnloaded",value:function(e){if(this.ee===e){this.ee=null;for(var t in this.__kb.callbacks){var r=this.__kb.callbacks[t];this._unbindCallbacks(t,r)}}}},{key:"_unbindCallbacks",value:function(e,t,r){t.model&&(t.model.unbind(e,t.fn),t.model=null);var n=!0,i=!1,a=void 0;try{for(var l,s=t.list[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;u.unbind_fn&&(u.unbind_fn(),u.unbind_fn=null),!u.emitter||r||o.wasReleased(u.obj)||u.emitter(null)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}}]),e}(),o.emitterObservable=function(e,t){return new o.EventWatcher(e,t)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0);a._;o.Factory=function(){function e(t){n(this,e),this.paths={},t&&(this.parent_factory=t)}return i(e,null,[{key:"useOptionsOrCreate",value:function(e,t,r){if(e.factory&&(!e.factories||e.factories&&e.factory.hasPathMappings(e.factories,r)))return o.utils.wrappedFactory(t,e.factory);var n=o.utils.wrappedFactory(t,new o.Factory(e.factory));return e.factories&&n.addPathMappings(e.factories,r),n}}]),i(e,[{key:"hasPath",value:function(e){return this.paths.hasOwnProperty(e)||(null!=this.parent_factory?this.parent_factory.hasPath(e):void 0)}},{key:"addPathMapping",value:function(e,t){return this.paths[e]=t}},{key:"addPathMappings",value:function(e,t){for(var r in e){var n=e[r];this.paths[o.utils.pathJoin(t,r)]=n}}},{key:"hasPathMappings",value:function(e,t){var r=!0;for(var n in e){var i,a=e[n];r&=(i=this.creatorForPath(null,o.utils.pathJoin(t,n)))&&a===i}return r}},{key:"creatorForPath",value:function(e,t){var r=void 0;return(r=this.paths[t])?r.view_model?r.view_model:r:(r=null!=this.parent_factory?this.parent_factory.creatorForPath(e,t):void 0)?r:null}}]),e}()},function(e,t,r){"use strict";var n=void 0;e.exports=n=r(0),n.configure=r(2),n.modules={underscore:n._,backbone:n.Parse||n.Backbone,knockout:n.ko}},function(e,t,r){"use strict";(function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=void 0,o=null!=o?o:e,a=i=r(0),l=a._,s=a.ko;i.RECUSIVE_AUTO_INJECT=!0,s.bindingHandlers.inject={init:function(e,t,r,n){return i.Inject.inject(s.utils.unwrapObservable(t()),n,e,t,r)}},i.Inject=function(){function e(){t(this,e)}return n(e,null,[{key:"inject",value:function e(t,r,n,o,a,s){var e=function(e){if(l.isFunction(e))r=new e(r,n,o,a),i.releaseOnNodeRemove(r,n);else{e.view_model&&(r=new e.view_model(r,n,o,a),i.releaseOnNodeRemove(r,n));for(var t in e){var u=e[t];if("view_model"!==t)if("create"===t)u(r,n,o,a);else if(l.isObject(u)&&!l.isFunction(u)){var c=s||u&&u.create?{}:r;r[t]=i.Inject.inject(u,c,n,o,a,!0)}else r[t]=u}}return r};return s?e(t):i.ignore(function(){return e(t)})}},{key:"injectViewModels",value:function(e){var t=[];!e&&(null!=o?o.document:void 0)&&(e=o.document),function e(r){if(!r.__kb_injected){var n=void 0;r.attributes&&(n=l.find(r.attributes,function(e){return"kb-inject"===e.name}))&&(r.__kb_injected=!0,t.push({el:r,view_model:{},binding:n.value}))}var i=!0,o=!1,a=void 0;try{for(var s,u=r.childNodes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){e(s.value)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}(e);var r=!0,n=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c,f,v,d,b=s.value;if(v=b.binding){var _;v.search(/[:]/)<0||(v="{"+v+"}");var h=new Function("","return ( "+v+" )")();h||(h={}),!h.options||(_=h,d=_.options,delete h.options),d||(d={}),b.view_model=i.Inject.inject(h,b.view_model,b.el,null,null,!0),c=b.view_model.afterBinding||d.afterBinding,f=b.view_model.beforeBinding||d.beforeBinding}f&&f.call(b.view_model,b.view_model,b.el,d),i.applyBindings(b.view_model,b.el,d),c&&c.call(b.view_model,b.view_model,b.el,d)}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return t}}]),e}();var u=s.applyBindings;if(s.applyBindings=function(e,t){if(!(i.RECUSIVE_AUTO_INJECT?i.injectViewModels(t):[]).length)return u.apply(this,arguments)},i.injectViewModels=i.Inject.injectViewModels,"undefined"!=typeof document&&null!==document){var c=void 0;(c=function(){return"complete"!==document.readyState?setTimeout(c,0):i.injectViewModels()})()}}).call(t,r(4))},function(e,t,r){"use strict";var n=void 0,i=n=r(0),o=i.ko;if(function(e,t){return void 0!==e&&null!==e?t(e):void 0}(null!=o.subscribable?o.subscribable.fn:void 0,function(e){return e.extend})){var a=o.subscribable.fn.extend;o.subscribable.fn.extend=function(){var e=a.apply(this,arguments);if(e!==this&&n.isReleaseable(this)){var t=e.dispose;e.dispose=function(){return null!=t&&t.apply(e,arguments),n.release(this)}.bind(this)}return e}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return void 0!==e&&null!==e?t(e):void 0}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=void 0,l=a=r(0),s=l._,u=l.ko,c=r(3),f=["value","valueType","destroy"],v=["args","read","write"];a.Observable=function(){function e(t,r,o,l){var d=this;return n(this,e),null==l&&(l={}),this._vm=l,a.ignore(function(){var e=void 0,n=void 0;r||a._throwMissing(d,"key_or_info"),d.key=r.key||r;var l=!0,b=!1,_=void 0;try{for(var h,p=v[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var y=h.value;r[y]&&(d[y]=r[y])}}catch(e){b=!0,_=e}finally{try{!l&&p.return&&p.return()}finally{if(b)throw _}}var k=a.utils.collapseOptions(o),w=k.event_watcher;delete k.event_watcher,d._value=new c(k),d._model=u.observable();var m=a.utils.wrappedObservable(d,u.computed({read:function(){e=d._model();var t=!0,r=!1,o=void 0;try{for(var l,c=(n=[d.key].concat(d.args||[]))[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var f=l.value;u.utils.unwrapObservable(f)}}catch(e){r=!0,o=e}finally{try{!t&&c.return&&c.return()}finally{if(r)throw o}}return i(a.utils.wrappedEventWatcher(d),function(t){return t.emitter(e||null)}),d.read?d.update(d.read.apply(d._vm,n)):s.isUndefined(e)||a.ignore(function(){return d.update(a.getValue(e,a.peek(d.key),d.args))}),d._value.value()},write:function(t){return a.ignore(function(){var r=a.utils.unwrapModels(t);return e=a.peek(d._model),d.write?(d.write.call(d._vm,r),t=a.getValue(e,a.peek(d.key),d.args)):e&&a.setValue(e,a.peek(d.key),r),d.update(t)})},owner:d._vm}));return m.__kb_is_o=!0,k.store=a.utils.wrappedStore(m,k.store),k.path=a.utils.pathJoin(k.path,d.key),k.factories&&("function"==typeof k.factories||k.factories.create)?(k.factory=a.utils.wrappedFactory(m,new a.Factory(k.factory)),k.factory.addPathMapping(k.path,k.factories)):k.factory=a.Factory.useOptionsOrCreate(k,m,k.path),delete k.factories,a.publishMethods(m,d,f),m.model=d.model=u.computed({read:function(){return u.utils.unwrapObservable(d._model)},write:function(e){return a.ignore(function(){if(!d.__kb_released&&a.peek(d._model)!==e){var t=a.getValue(e,a.peek(d.key),d.args);return d._model(e),e?s.isUndefined(t)?void 0:d.update(t):d.update(null)}})}}),a.EventWatcher.useOptionsOrCreate({event_watcher:w},t||null,d,{emitter:d.model,update:function(){return a.ignore(function(){return d.update()})},key:d.key,path:k.path}),d._value.rawValue()||d._value.update(),a.LocalizedObservable&&r.localizer&&(m=new r.localizer(m)),a.DefaultObservable&&r.hasOwnProperty("default")&&(m=a.defaultObservable(m,r.default)),m})}return o(e,[{key:"destroy",value:function(){var e=a.utils.wrappedObservable(this);return this.__kb_released=!0,this._value.destroy(),this._value=null,this.model.dispose(),this.model=e.model=null,a.utils.wrappedDestroy(this)}},{key:"value",value:function(){return this._value.rawValue()}},{key:"valueType",value:function(){return this._value.valueType(a.peek(this._model),a.peek(this.key))}},{key:"update",value:function(e){if(!this.__kb_released)return arguments.length||(e=a.getValue(a.peek(this._model),a.peek(this.key))),this._value.update(e)}}]),e}(),a.observable=function(e,t,r,n){return new a.Observable(e,t,r,n)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._
;e.exports=o.Statistics=function(){function e(){n(this,e),this.model_events_tracker=[],this.registered_tracker={}}return i(e,[{key:"clear",value:function(){return this.model_events_tracker=[]}},{key:"addModelEvent",value:function(e){return this.model_events_tracker.push(e)}},{key:"modelEventsStatsString",value:function(){var e="";e+="Total Count: "+this.model_events_tracker.length;var t=l.groupBy(this.model_events_tracker,function(e){return"event name: '"+e.name+"', attribute name: '"+e.key+"'"});for(var r in t){e+="\n "+r+", count: "+t[r].length}return e}},{key:"register",value:function(e,t){return this.registeredTracker(e).push(t)}},{key:"unregister",value:function(e,t){var r=void 0,n=this.registeredTracker(e);return(r=l.indexOf(n,t))<0?"undefined"!=typeof console&&null!==console?console.log("kb.Statistics: failed to unregister type: "+e):void 0:n.splice(r,1)}},{key:"registeredCount",value:function(e){if(e)return this.registeredTracker(e).length;var t=0;for(e in this.registered_tracker[e]){t+=this.registered_tracker[e][e].length}return t}},{key:"registeredStatsString",value:function(e){var t="";for(var r in this.registered_tracker){var n=this.registered_tracker[r];if(n.length){i&&(t+="\n "),t+=(r||"No Name")+": "+n.length;var i=!0}}return t||e}},{key:"registeredTracker",value:function(e){if(this.registered_tracker.hasOwnProperty(e))return this.registered_tracker[e];var t=[];return this.registered_tracker[e]=t,t}}],[{key:"eventsStats",value:function(e,t){var r={count:0},n=e._events||e._callbacks||{},i=!0,o=!1,a=void 0;try{for(var s,u=(t?[t]:l.keys(n))[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){t=s.value;var c;if(c=n[t]){if(l.isArray(c))r[t]=l.compact(c).length;else{r[t]=0;for(var f=c,v=f.tail;(c=c.next)!==v;)r[t]++}r.count+=r[t]}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return r}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return void 0!==e&&null!==e?t(e):void 0}var o=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=void 0,s=l=r(0),u=s._,c=s.ko;e.exports=function(e){return e.initClass(),e}(l.Store=function(){function e(){n(this,e),this.observable_records={},this.replaced_observables=[],l.Store.instances.push(this)}return a(e,null,[{key:"initClass",value:function(){this.instances=[]}},{key:"useOptionsOrCreate",value:function(e,t,r){e.store||l.utils.wrappedStoreIsOwned(r,!0);var n=l.utils.wrappedStore(r,e.store||new l.Store);return n.retain(r,t,e.creator),n}}]),a(e,[{key:"destroy",value:function(){var e=void 0;if(this.__kb_released=!0,this.clear(),(e=u.indexOf(l.Store.instances,this))>=0)return l.Store.instances.splice(e,1)}},{key:"clear",value:function(){var e=void 0,t=void 0,r=void 0,n=Array.from([this.observable_records,{}]),i=o(n,2);t=i[0],this.observable_records=i[1];for(var a in t){var l=t[a];for(var s in l)e=l[s],this.release(e,!0)}var u=Array.from([this.replaced_observables,[]]),c=o(u,2);r=c[0],this.replaced_observables=c[1];var f=!0,v=!1,d=void 0;try{for(var b,_=r[Symbol.iterator]();!(f=(b=_.next()).done);f=!0)e=b.value,e.__kb_released||this.release(e,!0)}catch(e){v=!0,d=e}finally{try{!f&&_.return&&_.return()}finally{if(v)throw d}}}},{key:"compact",value:function(){for(var e in this.observable_records){var t=this.observable_records[e];for(var r in t){t[r].__kb_released&&delete t[r]}}}},{key:"retain",value:function(e,t,r){var n=void 0;if(this._canRegister(e)){if(r||(r=e.constructor),n=this.find(t,r)){if(n===e)return this._getOrCreateStoreReferences(e).ref_count++,e;this._retire(n)}return this._add(e,t,r),this._getOrCreateStoreReferences(e).ref_count++,e}}},{key:"retainOrCreate",value:function(e,t,r){var n=this,i=void 0,o=void 0;if(!(i=this._creator(e,t)))return l.utils.createFromDefaultCreator(e,t);if(i.models_only)return e;if(o=this.find(e,i))return r&&l.settings.deep_retain?this.retain(o,e,i):o;if(!u.isFunction(i.create||i))throw new Error('Invalid factory for "'+t.path+'"');return o=l.ignore(function(){return t=u.defaults({store:n,creator:i},t),(o=i.create?i.create(e,t):new i(e,t))||c.observable(null)}),this.retain(o,e,i),o}},{key:"reuse",value:function(e,t){var r=void 0,n=void 0;if((r=l.utils.wrappedObject(e))!==t){if(!this._canRegister(e))throw new Error("Cannot reuse a simple observable");if(1!==this._refCount(e))throw new Error("Trying to change a shared view model. Ref count: "+this._refCount(e));var i=l.utils.wrappedCreator(e)||e.constructor;u.isUndefined(r)||(n=this.find(r,i)),this.retain(e,t,i),n&&this.release(n)}}},{key:"release",value:function(e,t){var r=void 0;if(!this._canRegister(e))return l.release(e);if(r=this._storeReferences(e)){if(!t&&--r.ref_count>0)return;this._clearStoreReferences(e)}return this._remove(e),e.__kb_released?void 0:t||this._refCount(e)<=1?l.release(e):void 0}},{key:"find",value:function(e,t){var r=void 0,n=void 0;return(n=this.observable_records[this._creatorId(t)])?i(r=n[this._cid(e)],function(e){return e.__kb_released})?(delete n[this._cid(e)],null):r:null}},{key:"_refCount",value:function(e){var t=void 0;return e.__kb_released?("undefined"!=typeof console&&null!==console&&console.log("Observable already released"),0):(t=l.utils.get(e,"stores_references"))?u.reduce(t,function(e,t){return e+t.ref_count},0):1}},{key:"_canRegister",value:function(e){return e&&!c.isObservable(e)&&!e.__kb_is_co}},{key:"_cid",value:function(e){return e?e.cid||(e.cid=u.uniqueId("c")):"null"}},{key:"_creatorId",value:function(e){var t=e.create||e;t.__kb_cids||(t.__kb_cids=[]);var r=!0,n=!1,i=void 0;try{for(var o,a=t.__kb_cids[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(l.create===t)return l.cid}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return t.__kb_cids.push(l={create:t,cid:u.uniqueId("kb")}),l.cid}},{key:"_storeReferences",value:function(e){var t=this,r=void 0;if(r=l.utils.get(e,"stores_references"))return u.find(r,function(e){return e.store===t})}},{key:"_getOrCreateStoreReferences",value:function(e){var t=this,r=void 0,n=l.utils.orSet(e,"stores_references",[]);return(r=u.find(n,function(e){return e.store===t}))||n.push(r={store:this,ref_count:0,release:function(){return t.release(e)}}),r}},{key:"_clearStoreReferences",value:function(e){if(l.utils.get(e,"stores_references"))for(var t in e.__kb.stores_references){var r=e.__kb.stores_references[t];if(r.store===this){e.__kb.stores_references.splice(t,1);break}}}},{key:"_retire",value:function(e){return this._clearStoreReferences(e),this.replaced_observables.push(e),this._remove(e)}},{key:"_add",value:function(e,t,r){var n=void 0;return r||(r=e.constructor),l.utils.wrappedObject(e,t),l.utils.wrappedCreator(e,r),(this.observable_records[n=this._creatorId(r)]||(this.observable_records[n]={}))[this._cid(t)]=e}},{key:"_remove",value:function(e){var t=void 0,r=void 0,n=l.utils.wrappedCreator(e)||e.constructor;return(t=this.find(r=l.utils.wrappedObject(e),n))&&t===e&&delete this.observable_records[this._creatorId(n)][this._cid(r)],l.utils.wrappedObject(e,null),l.utils.wrappedCreator(e,null)}},{key:"_creator",value:function(e,t){var r=void 0;return t.creator?t.creator:(r=l.utils.inferCreator(e,t.factory,t.path))?r:l.isModel(e)?l.ViewModel:void 0}}]),e}())},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._,s=a.ko,u=function(){function e(){n(this,e)}return i(e,null,[{key:"initClass",value:function(){this.wrappedDestroy=r(23),this.collapseOptions=r(21),this.unwrapModels=r(22)}},{key:"get",value:function(e,t,r){return e.__kb&&e.__kb.hasOwnProperty(t)?e.__kb[t]:r}},{key:"set",value:function(e,t,r){return(e.__kb||(e.__kb={}))[t]=r}},{key:"orSet",value:function(e,t,r){if(!(e.__kb||(e.__kb={})).hasOwnProperty(t))return e.__kb[t]=r,e.__kb[t]}},{key:"has",value:function(e,t){return e.__kb&&e.__kb.hasOwnProperty(t)}},{key:"wrappedObservable",value:function(e,t){return 1===arguments.length?o.utils.get(e,"observable"):o.utils.set(e,"observable",t)}},{key:"wrappedObject",value:function(e,t){return 1===arguments.length?o.utils.get(e,"object"):o.utils.set(e,"object",t)}},{key:"wrappedCreator",value:function(e,t){return 1===arguments.length?o.utils.get(e,"creator"):o.utils.set(e,"creator",t)}},{key:"wrappedModel",value:function(e,t){if(1!==arguments.length)return o.utils.set(e,"object",t);l.isUndefined(t=o.utils.get(e,"object"))}},{key:"wrappedStore",value:function(e,t){return 1===arguments.length?o.utils.get(e,"store"):o.utils.set(e,"store",t)}},{key:"wrappedStoreIsOwned",value:function(e,t){return 1===arguments.length?o.utils.get(e,"store_is_owned"):o.utils.set(e,"store_is_owned",t)}},{key:"wrappedFactory",value:function(e,t){return 1===arguments.length?o.utils.get(e,"factory"):o.utils.set(e,"factory",t)}},{key:"wrappedEventWatcher",value:function(e,t){return 1===arguments.length?o.utils.get(e,"event_watcher"):o.utils.set(e,"event_watcher",t)}},{key:"wrappedEventWatcherIsOwned",value:function(e,t){return 1===arguments.length?o.utils.get(e,"event_watcher_is_owned"):o.utils.set(e,"event_watcher_is_owned",t)}},{key:"valueType",value:function(e){return e?e.__kb_is_o?e.valueType():e.__kb_is_co||e instanceof o.Collection?o.TYPE_COLLECTION:e instanceof o.ViewModel||e instanceof o.Model?o.TYPE_MODEL:l.isArray(e)?o.TYPE_ARRAY:o.TYPE_SIMPLE:o.TYPE_UNKNOWN}},{key:"pathJoin",value:function(e,t){return(e?"."!==e[e.length-1]?e+".":e:"")+t}},{key:"optionsPathJoin",value:function(e,t){return l.defaults({path:this.pathJoin(e.path,t)},e)}},{key:"inferCreator",value:function(e,t,r){var n=void 0;return t&&(n=t.creatorForPath(e,r))?n:e?e instanceof o.Model?o.ViewModel:e instanceof o.Collection?o.CollectionObservable:null:null}},{key:"createFromDefaultCreator",value:function(e,t){return o.isModel(e)?o.viewModel(e,t):o.isCollection(e)?o.collectionObservable(e,t):l.isArray(e)?s.observableArray(e):s.observable(e)}},{key:"resolveModel",value:function(e){return e&&o.Backbone&&o.Backbone.ModelRef&&e instanceof o.Backbone.ModelRef?e.model():e}}]),e}();u.initClass(),o.utils=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){if(void 0!==e&&null!==e&&"function"==typeof e[t])return r(e,t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=void 0,l=a=r(0),s=l._,u=l.ko,c=r(1),f=function(e,t){var r=e.__kb.internals&&~s.indexOf(e.__kb.internals,t)?"_"+t:t;if(!e.__kb.view_model.hasOwnProperty(r))return e.__kb.view_model[r]=null,r},v=function(e,t,r,n){var i=void 0;if((!e.__kb.excludes||!~s.indexOf(e.__kb.excludes,r))&&(!e.__kb.statics||!~s.indexOf(e.__kb.statics,r))&&(i=f(e,r)))return e[i]=e.__kb.view_model[i]=a.observable(t,r,n,e)},d=function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=e.__kb.statics[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l,s=o.value;(l=f(e,s))&&(t.has(l)?e[l]=e.__kb.view_model[l]=t.get(l):e.__kb.static_defaults&&l in e.__kb.static_defaults?e[l]=e.__kb.view_model[l]=e.__kb.static_defaults[l]:delete e.__kb.view_model[l])}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}},b=["keys","internals","excludes","statics","static_defaults"],_=function(){function e(t,r,i){var o=this;n(this,e),null==r&&(r={});var l=Array.prototype.slice.call(s.isArguments(t)?t:arguments);return a.ignore(function(){!(t=l.shift())||a.isModel(t)||a._throwUnexpected(o,"not a model"),s.isArray(l[0])&&(l[0]={keys:l[0]}),o.__kb||(o.__kb={}),o.__kb.view_model=l.length>1?l.pop():o,r={};var e=!0,n=!1,i=void 0;try{for(var c,f=l[Symbol.iterator]();!(e=(c=f.next()).done);e=!0){var v=c.value;s.extend(r,v),r=a.utils.collapseOptions(r)}}catch(e){n=!0,i=e}finally{try{!e&&f.return&&f.return()}finally{if(n)throw i}}var _=!0,h=!1,p=void 0;try{for(var y,k=b[Symbol.iterator]();!(_=(y=k.next()).done);_=!0){var w=y.value;r.hasOwnProperty(w)&&(o.__kb[w]=r[w])}}catch(e){h=!0,p=e}finally{try{!_&&k.return&&k.return()}finally{if(h)throw p}}a.Store.useOptionsOrCreate(r,t,o),o.__kb.path=r.path,a.Factory.useOptionsOrCreate(r,o,r.path);var m=a.utils.set(o,"_model",u.observable());o.model=u.computed({read:function(){return u.utils.unwrapObservable(m)},write:function(e){return a.ignore(function(){if(a.utils.wrappedObject(o)!==e&&!a.wasReleased(o)&&g)return o.__kb.store.reuse(o,a.utils.resolveModel(e)),g.emitter(e),m(g.ee),!g.ee||o.createObservables(g.ee)})}});var g=a.utils.wrappedEventWatcher(o,new a.EventWatcher(t,o,{emitter:o._model,update:function(){return a.ignore(function(){return!(null!=g?g.ee:void 0)||o.createObservables(null!=g?g.ee:void 0)})}}));return a.utils.wrappedObject(o,t=g.ee),m(g.ee),o.__kb.create_options={store:a.utils.wrappedStore(o),factory:a.utils.wrappedFactory(o),path:o.__kb.path,event_watcher:a.utils.wrappedEventWatcher(o)},!r.requires||o.createObservables(t,r.requires),!o.__kb.internals||o.createObservables(t,o.__kb.internals),!r.mappings||o.createObservables(t,r.mappings),!o.__kb.statics||d(o,t),o.createObservables(t,o.__kb.keys),!a.statistics||a.statistics.register("ViewModel",o),o})}return o(e,null,[{key:"initClass",value:function(){this.extend=c}}]),o(e,[{key:"destroy",value:function(){var e=this;return this.__kb_released=!0,this.__kb.view_model!==this&&function(){var t=[];for(var r in e.__kb.vm_keys)t.push(e.__kb.view_model[r]=null);t}(),this.__kb.view_model=this.__kb.create_options=null,a.releaseKeys(this),a.utils.wrappedDestroy(this),!a.statistics||a.statistics.unregister("ViewModel",this)}},{key:"shareOptions",value:function(){return{store:a.utils.wrappedStore(this),factory:a.utils.wrappedFactory(this)}}},{key:"createObservables",value:function(e,t){var r=this,n=void 0;if(t)if(s.isArray(t)){var o=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0)n=c.value,v(this,e,n,this.__kb.create_options)}catch(e){l=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw u}}}else for(n in t){var b,_=t[n];(b=f(this,n))&&(s.isString(_)||_.key||(_.key=b),this[b]=this.__kb.view_model[b]=a.observable(e,_,this.__kb.create_options,this))}else{var h=void 0;if(this.__kb.keys||!e)return;for(n in e.attributes)v(this,e,n,this.__kb.create_options);(h=i(a.settings.orm,"keys",function(t){return t.keys(e)}))&&function(){var t=[],i=!0,o=!1,a=void 0;try{for(var l,s=h[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)n=l.value,t.push(v(r,e,n,r.__kb.create_options))}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}t}()}}}]),e}();_.initClass(),a.ViewModel=_,a.viewModel=function(e,t,r){return new a.ViewModel(arguments)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._,s=a.ko;r(26);var u=["destroy","setToDefault"];e.exports=o.DefaultObservable=function(){function e(t,r){var i=this;n(this,e),this.dv=r;var a=o.utils.wrappedObservable(this,s.computed({read:function(){var e=s.utils.unwrapObservable(t());return l.isNull(e)||l.isUndefined(e)?s.utils.unwrapObservable(i.dv):e},write:function(e){return t(e)}}));return o.publishMethods(a,this,u),a}return i(e,[{key:"destroy",value:function(){return o.utils.wrappedDestroy(this)}},{key:"setToDefault",value:function(){return o.utils.wrappedObservable(this)(this.dv)}}]),e}(),o.defaultObservable=function(e,t){return new o.DefaultObservable(e,t)},o.observableDefault=o.defaultObservable},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._,s=a.ko,u=Array.prototype.slice;o.toFormattedString=function(e){var t=e.slice(),r=u.call(arguments,1);for(var n in r){var i=r[n],o=s.utils.unwrapObservable(i);(l.isUndefined(o)||l.isNull(o))&&(o="");for(var a=e.indexOf("{"+n+"}");a>=0;)t=t.replace("{"+n+"}",o),a=e.indexOf("{"+n+"}",a+1)}return t},o.parseFormattedString=function(e,t){for(var r=void 0,n=t.slice(),i=0,o=0,a={};n.search("\\{"+i+"\\}")>=0;){for(r=t.indexOf("{"+i+"}");r>=0;)n=n.replace("{"+i+"}","(.*)"),a[r]=i,o++,r=t.indexOf("{"+i+"}",r+1);i++}var s=i,u=new RegExp(n),c=u.exec(e);if(c&&c.shift(),!c||c.length!==o){for(var f=[];s-- >0;)f.push("");return f}var v=l.sortBy(l.keys(a),function(e,t){return parseInt(e,10)}),d={};for(var b in v)r=v[b],i=a[r],d.hasOwnProperty(i)||(d[i]=b);var _=[];for(i=0;i<s;)_.push(c[d[i]]),i++;return _},e.exports=o.FormattedObservable=function(){function e(t,r){n(this,e);var i=void 0;return l.isArray(r)?(t=t,i=r):i=u.call(arguments,1),o.utils.wrappedObservable(this,s.computed({read:function(){r=[s.utils.unwrapObservable(t)];var e=!0,n=!1,a=void 0;try{for(var l,u=i[Symbol.iterator]();!(e=(l=u.next()).done);e=!0){var c=l.value;r.push(s.utils.unwrapObservable(c))}}catch(e){n=!0,a=e}finally{try{!e&&u.return&&u.return()}finally{if(n)throw a}}return o.toFormattedString.apply(null,r)},write:function(e){for(var r=o.parseFormattedString(e,s.utils.unwrapObservable(t)),n=Math.min(i.length,r.length),a=0;a<n;)i[a](r[a]),a++}}))}return i(e,[{key:"destroy",value:function(){return o.utils.wrappedDestroy(this)}}]),e}(),o.formattedObservable=function(e,t){return new o.FormattedObservable(e,u.call(arguments,1))},o.observableFormatted=o.formattedObservable},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._,s=a.ko,u=r(1),c=["destroy","observedValue","resetToCurrent"];o.locale_manager||(o.locale_manager=void 0),e.exports=function(e){return e.initClass(),e}(o.LocalizedObservable=function(){function e(t,r,i){var a=this;n(this,e);var u=void 0;this.value=t,this.vm=i,r||(r={}),this.vm||(this.vm={}),this.read||o._throwMissing(this,"read"),o.locale_manager||o._throwMissing(this,"kb.locale_manager"),this.__kb||(this.__kb={}),this.__kb._onLocaleChange=l.bind(this._onLocaleChange,this),this.__kb._onChange=r.onChange,this.value&&(u=s.utils.unwrapObservable(this.value)),this.vo=s.observable(u?this.read(u,null):null);var f=o.utils.wrappedObservable(this,s.computed({read:function(){return a.value&&s.utils.unwrapObservable(a.value),a.vo(),a.read(s.utils.unwrapObservable(a.value))},write:function(e){if(a.write||o._throwUnexpected(a,"writing to read-only"),a.write(e,s.utils.unwrapObservable(a.value)),a.vo(e),a.__kb._onChange)return a.__kb._onChange(e)},owner:this.vm}));return o.publishMethods(f,this,c),o.locale_manager.bind("change",this.__kb._onLocaleChange),r.hasOwnProperty("default")&&(f=o.DefaultObservable&&s.defaultObservable(f,r.default)),f}return i(e,null,[{key:"initClass",value:function(){this.extend=u}}]),i(e,[{key:"destroy",value:function(){return o.locale_manager.unbind("change",this.__kb._onLocaleChange),this.vm=null,o.utils.wrappedDestroy(this)}},{key:"resetToCurrent",value:function(){var e=o.utils.wrappedObservable(this),t=this.value?this.read(s.utils.unwrapObservable(this.value)):null;if(e()!==t)return e(t)}},{key:"observedValue",value:function(e){if(0===arguments.length)return this.value;this.value=e,this._onLocaleChange()}},{key:"_onLocaleChange",value:function(){var e=this.read(s.utils.unwrapObservable(this.value));if(this.vo(e),this.__kb._onChange)return this.__kb._onChange(e)}}]),e}()),o.localizedObservable=function(e,t,r){return new o.LocalizedObservable(e,t,r)},o.observableLocalized=o.localizedObservable},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._,s=a.ko,u=["destroy"];e.exports=o.TriggeredObservable=function(){function e(t,r){var i=this;n(this,e),this.event_selector=r,t||o._throwMissing(this,"emitter"),this.event_selector||o._throwMissing(this,"event_selector"),this.vo=s.observable();var a=o.utils.wrappedObservable(this,s.computed(function(){return i.vo()}));return o.publishMethods(a,this,u),o.utils.wrappedEventWatcher(this,new o.EventWatcher(t,this,{emitter:l.bind(this.emitter,this),update:l.bind(this.update,this),event_selector:this.event_selector})),a}return i(e,[{key:"destroy",value:function(){return o.utils.wrappedDestroy(this)}},{key:"emitter",value:function(e){return 0===arguments.length||this.ee===e?this.ee:(this.ee=e)?this.update():void 0}},{key:"update",value:function(){if(this.ee)return this.vo()!==this.ee?this.vo(this.ee):this.vo.valueHasMutated()}}]),e}(),o.triggeredObservable=function(e,t){return new o.TriggeredObservable(e,t)},o.observableTriggered=o.triggeredObservable},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o=void 0,a=o=r(0),l=a._,s=a.ko;r(27);var u=function(e){return e=s.utils.unwrapObservable(e),"function"==typeof e?e.apply(void 0,i(Array.prototype.slice.call(arguments,1))):e};e.exports=o.Validation=function e(){n(this,e)},o.valueValidator=function(e,t,r){return null==r&&(r={}),r&&!("function"==typeof r)||(r={}),s.computed(function(){var n=void 0,i={$error_count:0},o=s.utils.unwrapObservable(e);!("disable"in r)||(n=u(r.disable)),!("enable"in r)||(n=!u(r.enable));var a=r.priorities||[];l.isArray(a)||(a=[a]);var c=a.length+1;for(var f in t){var v=t[f];if(i[f]=!n&&u(v,o),i[f]){var d;i.$error_count++,(d=l.indexOf(a,f)>=0)||(d=a.length),i.$active_error&&d<c?(i.$active_error=f,c=d):i.$active_error||(i.$active_error=f,c=d)}}return i.$enabled=!n,i.$disable=!!n,i.$valid=0===i.$error_count,i})},o.inputValidator=function(e,t,r){var n,i=void 0,a=void 0,s=void 0;null==r&&(r={}),r&&!("function"==typeof r)||(r={});var u=o.valid;if((a=t.getAttribute("name"))&&!l.isString(a)&&(a=null),!(i=t.getAttribute("data-bind")))return null;var c=new Function("sc","with(sc[0]) { return { "+i+" } }")([e]);if(!c||!c.value)return null;if(!c.validation_options||(l.defaults(c.validation_options,r),n=c,r=n.validation_options),i={},!u[s=t.getAttribute("type")]||(i[s]=u[s]),!t.hasAttribute("required")||(i.required=u.required),c.validations)for(var f in c.validations){var v=c.validations[f];i[f]=v}var d=o.valueValidator(c.value,i,r);return!a&&!r.no_attach||(e["$"+a]=d),d},o.formValidator=function(e,t){var r=void 0,n=void 0,i=void 0,a=void 0,u={},c=[];if((n=t.getAttribute("name"))&&!l.isString(n)&&(n=null),r=t.getAttribute("data-bind")){i=new Function("sc","with(sc[0]) { return { "+r+" } }")([e]).validation_options}i||(i={}),i.no_attach=!!n;var f=!0,v=!1,d=void 0;try{for(var b,_=t.getElementsByTagName("input")[Symbol.iterator]();!(f=(b=_.next()).done);f=!0){var h,p=b.value;(h=p.getAttribute("name"))&&(!(a=o.inputValidator(e,p,i))||c.push(u[h]=a))}}catch(e){v=!0,d=e}finally{try{!f&&_.return&&_.return()}finally{if(v)throw d}}return u.$error_count=s.computed(function(){var e=0,t=!0,r=!1,n=void 0;try{for(var i,o=c[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)a=i.value,e+=a().$error_count}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return e}),u.$valid=s.computed(function(){return 0===u.$error_count()}),u.$enabled=s.computed(function(){var e=!0,t=!0,r=!1,n=void 0;try{for(var i,o=c[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)a=i.value,e&=a().$enabled}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return e}),u.$disabled=s.computed(function(){return!u.$enabled()}),n&&(e["$"+n]=u),u}},function(e,t,r){"use strict";var n=r(0),i=n._,o=function(e,t,r){return e[t]||(e[t]=[]),i.isArray(r)||(r=[r]),e[t]=e[t].length?i.union(e[t],r):r,e},a=function(e,t,r){return e[t]||(e[t]={}),i.extend(e[t],r)},l=function(e){var t={},r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;return t[l]={key:l},t}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}},s=function e(t,r){if(!r)return t;for(var n in r){var s=r[n];switch(n){case"internals":case"requires":case"excludes":case"statics":o(t,n,s);break;case"keys":i.isObject(s)&&!i.isArray(s)||i.isObject(t[n])&&!i.isArray(t[n])?(i.isObject(s)||(s=[s]),i.isArray(s)&&(s=l(s)),i.isArray(t[n])&&(t[n]=l(t[n])),a(t,n,s)):o(t,n,s);break;case"factories":i.isFunction(s)?t[n]=s:a(t,n,s);break;case"static_defaults":a(t,n,s);break;case"options":then;break;default:t[n]=s}}return e(t,r.options)};e.exports=function(e){return s({},e)}},function(e,t,r){"use strict";var n=void 0,i=r(0),o=i._;e.exports=n=function(e){if(!e)return e;if(e.__kb)return e.__kb.hasOwnProperty("object")?e.__kb.object:e;if(o.isArray(e))return o.map(e,function(e){return n(e)});if(o.isObject(e)&&e.constructor==={}.constructor){var t={};for(var r in e){var i=e[r];t[r]=n(i)}return t}return e}},function(e,t,r){"use strict";var n=void 0,i=r(0);i._;e.exports=n=function(e){if(e.__kb){e.__kb.event_watcher&&e.__kb.event_watcher.releaseCallbacks(e);var t=e.__kb;if(e.__kb=null,t.observable&&(t.observable.destroy=t.observable.release=null,n(t.observable),t.observable=null),t.factory=null,t.event_watcher_is_owned&&t.event_watcher.destroy(),t.event_watcher=null,t.store_is_owned&&t.store.destroy(),t.store=null,t.stores_references)for(var r=void 0;r=t.stores_references.pop();)r.store.__kb_released||r.store.release(e)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._,s=a.Backbone,u=null;e.exports=function(){function e(){n(this,e)}return i(e,null,[{key:"isAvailable",value:function(){return!!(u=null!=s?s.AssociatedModel:void 0)}},{key:"keys",value:function(e){return e instanceof u?l.map(e.relations,function(e){return e.key}):null}},{key:"relationType",value:function(e,t){var r=void 0;return e instanceof u&&(r=l.find(e.relations,function(e){return e.key===t}))?"Many"===r.type?o.TYPE_COLLECTION:o.TYPE_MODEL:null}},{key:"useFunction",value:function(){return!1}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=o=r(0),l=a._,s=a.Backbone,u=null;e.exports=function(){function e(){n(this,e)}return i(e,null,[{key:"isAvailable",value:function(){return!!(u=null!=s?s.RelationalModel:void 0)}},{key:"relationType",value:function(e,t){var r=void 0;return e instanceof u&&(r=l.find(e.getRelations(),function(e){return e.key===t}))?r.collectionType||l.isArray(r.keyContents)?o.TYPE_COLLECTION:o.TYPE_MODEL:null}},{key:"bind",value:function(e,t,r,n){var i=void 0,a=void 0;if(!(a=this.relationType(e,t)))return null;var l=function(e){return!o.statistics||o.statistics.addModelEvent({name:"update (relational)",model:e,key:t,path:n}),r()},s=o.Backbone.Relation.prototype.sanitizeOptions?["update","add","remove"]:["change","add","remove"];if(a===o.TYPE_COLLECTION){var u=!0,c=!1,f=void 0;try{for(var v,d=s[Symbol.iterator]();!(u=(v=d.next()).done);u=!0)i=v.value,e.bind(i+":"+t,l)}catch(e){c=!0,f=e}finally{try{!u&&d.return&&d.return()}finally{if(c)throw f}}}else e.bind(s[0]+":"+t,l);return function(){if(a===o.TYPE_COLLECTION){var r=!0,n=!1,u=void 0;try{for(var c,f=s[Symbol.iterator]();!(r=(c=f.next()).done);r=!0)i=c.value,e.unbind(i+":"+t,l)}catch(e){n=!0,u=e}finally{try{!r&&f.return&&f.return()}finally{if(n)throw u}}}else e.unbind(s[0]+":"+t,l)}}},{key:"useFunction",value:function(){return!1}}]),e}()},function(e,t,r){"use strict";function n(e,t,r){if(void 0!==e&&null!==e&&"function"==typeof e[t])return r(e,t)}var i=void 0,o=i=r(0),a=o._,l=o.ko;i.Observable.prototype.setToDefault=function(){n(this.__kb_value,"setToDefault",function(e){return e.setToDefault()})},i.ViewModel.prototype.setToDefault=function(){for(var e in this.__kb.vm_keys)return void n(this[e],"setToDefault",function(e){return e.setToDefault()})},i.utils.setToDefault=function(e){if(e){if(l.isObservable(e))"function"==typeof e.setToDefault&&e.setToDefault();else if(a.isObject(e))for(var t in e){var r=e[t];!r||!l.isObservable(r)&&"function"==typeof r||"_"===t[0]&&!t.search("__kb")||this.setToDefault(r)}return e}}},function(e,t,r){"use strict";var n=void 0,i=n=r(0),o=i._,a=i.ko,l=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,s=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,u=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;n.valid={required:function(e){return!e},url:function(e){return!l.test(e)},email:function(e){return!s.test(e)},number:function(e){return!u.test(e)}},n.hasChangedFn=function(e){var t=null,r=null;return function(){var n=void 0;return t!==(n=a.utils.unwrapObservable(e))?(t=n,r=t?t.toJSON():null,!1):!(!t||!r)&&!o.isEqual(t.toJSON(),r)}},n.minLengthFn=function(e){return function(t){return!t||t.length<e}},n.uniqueValueFn=function(e,t,r){return function(n){var i=a.utils.unwrapObservable(e),l=a.utils.unwrapObservable(t),s=a.utils.unwrapObservable(r);return!!(i&&l&&s)&&!!o.find(s.models,function(e){return e!==i&&e.get(l)===n})}},n.untilTrueFn=function(e,t,r){var n=!1;return r&&a.isObservable(r)&&r.subscribe(function(){return n=!1}),function(r){var i=void 0,o=void 0;return(i=a.utils.unwrapObservable(t))?(n|=!!(o=i(a.utils.unwrapObservable(r))),n?o:a.utils.unwrapObservable(e)):a.utils.unwrapObservable(e)}},n.untilFalseFn=function(e,t,r){var n=!1;return r&&a.isObservable(r)&&r.subscribe(function(){return n=!1}),function(r){var i=void 0,o=void 0;return(i=a.utils.unwrapObservable(t))?(n|=!(o=i(a.utils.unwrapObservable(r))),n?o:a.utils.unwrapObservable(e)):a.utils.unwrapObservable(e)}}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){r(5),r(2),r(6),r(7),r(9),r(0),r(10),r(11),r(12),r(13),r(3),r(14),r(15),r(16),r(17),
r(18),r(19),r(20),e.exports=r(8)}])});